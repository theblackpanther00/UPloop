<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <title>Document</title>
</head>

<body>
    <video src="assets/pexels-zch-12722063 (2160p).mp4" id="video" autoplay muted loop></video>
    <div class="navbar">
        <div class="logo">
            <a href="index.html"><img src="/assets/Uploop Logo.svg" alt="Logo"> </a>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="signin.html">Sign In</a></li>
            <li><a href="upload.html">Upload</a></li>
            <li><a href="#">About</a></li>
        </ul>
    </div>


    <div class="signin-container">
            <h1>Sign - Up</h1>
            <form action="#">
                <input type="email" placeholder="Email" id="email">
                <input type="text" placeholder="Username" id="username">

                <input type="password" placeholder="Password" id="password">
            </form>

            <div class="terms">
                <input type="checkbox" id="checkbox">
                <label for="checkbox"> I agree to these <a href="#">Terms & Conditions</a></label>
            </div>
            <input type="submit" id="signUp" value="Sign Up">

            <div class="member">
                Already a member? <a href="login.html">Log - in</a>
            </div>
        
    </div>


</body>
<script type="module">

     // Import the functions you need from the SDKs you need
 import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
 import { getDatabase, set, ref} from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";
 import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
 // TODO: Add SDKs for Firebase products that you want to use
 // https://firebase.google.com/docs/web/setup#available-libraries

 // Your web app's Firebase configuration
 // For Firebase JS SDK v7.20.0 and later, measurementId is optional
 const firebaseConfig = {
   apiKey: "AIzaSyB9Q5zmQJvvsuuUNI8UKSCF5CaPUxFCtSY",
   authDomain: "uploop-de34a.firebaseapp.com",
   projectId: "uploop-de34a",
   storageBucket: "uploop-de34a.appspot.com",
   messagingSenderId: "204359880271",
   appId: "1:204359880271:web:1a0781702052ef4829243a",
   measurementId: "G-3BZQ1ZWPZN"
 };

 // Initialize Firebase
 const app = initializeApp(firebaseConfig);
 const database = getDatabase(app);
 const auth = getAuth();

 var email = document.getElementById("email").value;
 var password = document.getElementById("password").value;
 var username = document.getElementById("username").value;

 signUp.addEventListener('click', (e) => {
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;
            var username = document.getElementById("username").value;

            createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
            // Signed in 
            const user = userCredential.user;

            set(ref(database , 'users/' + user.uid),{
                username: username,
                email: email    
                
            })
            alert('user created');
            window.location.href = "signedin.html";
            // ...
        }).catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;

            alert(errorMessage);
            // ..
        });

    });
</script>

</html>